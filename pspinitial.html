<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>BVCOE - 3D Intact PSP</title>
    <style>
        body {
            background: #020205;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            perspective: 3000px;
            font-family: 'Segoe UI', sans-serif;
            overflow: hidden;
        }

        .scene {
            width: 880px;
            height: 380px;
            position: relative;
            transform-style: preserve-3d;
            cursor: grab;
            transform: rotateY(-25deg) rotateX(15deg);
        }

        .psp-body {
            width: 100%;
            height: 100%;
            position: relative;
            transform-style: preserve-3d;
        }

        /* SHARED SIDE PROPERTIES */
        .side {
            position: absolute;
            background: #0a0a0a;
            box-sizing: border-box;
            /* Using a slight scale to overlap and prevent see-through gaps */
            transform-origin: center;
        }

        .face {
            width: 880px;
            height: 380px;
            border-radius: 95px;
            border: 2px solid #1a1a1a;
        }

        .front {
            background: linear-gradient(180deg, #222 0%, #0a0a0a 50%, #000 100%);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 50px;
            transform: translateZ(16px); /* Half girth + small overlap */
        }

        /* BACK FACE WITH SILVER RING */
        .back {
            background: #080808;
            transform: rotateY(180deg) translateZ(16px);
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .back::before {
            content: '';
            position: absolute;
            width: 240px;
            height: 240px;
            border: 8px solid #444; /* The Silver Ring */
            border-radius: 50%;
            background: radial-gradient(circle, transparent 60%, rgba(255,255,255,0.05) 100%);
            box-shadow: inset 0 0 20px #000, 0 0 10px rgba(0,0,0,0.5);
        }

        .psp-logo-img {
            width: 200px;
            z-index: 10;
            filter: invert(0.9);
        }

        /* SEALED GIRTH PANELS */
        .girth-h {
            width: 710px; 
            height: 33px; /* Slightly thicker than 30px to seal gaps */
            left: 85px;
        }

        .side-top { transform: translateY(-16px) rotateX(90deg); background: #1a1a1a; }
        .side-bottom { transform: translateY(363px) rotateX(90deg); background: #000; }

        .girth-v {
            width: 33px; 
            height: 210px;
            top: 85px;
        }

        .side-left { transform: translateX(-16px) rotateY(90deg); background: #0a0a0a; }
        .side-right { transform: translateX(863px) rotateY(90deg); background: #0a0a0a; }

        /* INTERNAL CSS: Experiment Requirements */
        .capital-font {
            color: #ffcc00;        
            font-weight: 900;     
            font-size: 46px;       
            letter-spacing: 5px;
            text-shadow: 4px 4px 0px #443300;
        }

        /* UI/SCREEN COMPONENTS */
        .screen {
            flex: 1; height: 300px; margin: 0 45px; background: #111; border-radius: 12px;
            border: 12px solid #000; position: relative; overflow: hidden; display: flex; flex-direction: column;
            box-shadow: inset 0 0 40px #000;
        }

        #popup {
            position: absolute; inset: 0; background: rgba(0, 0, 0, 0.98); display: none;
            flex-direction: column; justify-content: center; align-items: center; z-index: 1000;
        }

        .menu-viewport { flex: 1; overflow-y: auto; padding: 20px 0; scroll-behavior: smooth; }
        .menu-viewport::-webkit-scrollbar { width: 0; }
        .item { padding: 12px 30px; color: #444; font-size: 16px; font-weight: bold; transition: 0.3s; }
        .item.active { color: #fff; background: rgba(255, 255, 255, 0.05); border-left: 8px solid #ffcc00; transform: translateX(20px); }

        /* HARDWARE KEYS */
        .key { width: 48px; height: 48px; background: #1a1a1a; border-radius: 50%; display: flex; justify-content: center; align-items: center; color: #444; font-size: 20px; cursor: pointer; box-shadow: 0 5px 0 #000; border: 1px solid #222; }
        .btn-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; }
    </style>
</head>
<body>

    <div class="scene" id="scene">
        <div class="psp-body">
            <div class="side face front">
                <div class="btn-grid">
                    <div></div><div class="key" onclick="nav(-1)">▲</div><div></div>
                    <div class="key" onclick="nav(-5)">◀</div><div></div><div class="key" onclick="nav(5)">▶</div>
                    <div></div><div class="key" onclick="nav(1)">▼</div><div></div>
                </div>
                <div class="screen">
                    <div id="popup">
                        <div id="cap-display" class="capital-font">---</div>
                        <p style="color: #444; font-size: 10px;">PRESS (◯) TO DISMISS</p>
                    </div>
                    <div class="menu-viewport" id="viewport"></div>
                </div>
                <div class="btn-grid">
                    <div></div><div class="key" style="color: #00c2ff;">△</div><div></div>
                    <div class="key" style="color: #f44;" onclick="closePop()">▢</div><div></div><div class="key" style="color: #f44;" onclick="closePop()">◯</div>
                    <div></div><div class="key" style="color: #0f0;" onclick="confirm()">✕</div><div></div>
                </div>
            </div>

            <div class="side face back">
                <img src="psp-vector-logo.png" class="psp-logo-img" alt="Logo">
            </div>

            <div class="side girth-h side-top"></div>
            <div class="side girth-h side-bottom"></div>
            <div class="side girth-v side-left"></div>
            <div class="side girth-v side-right"></div>
        </div>
    </div>

    <script>
        const scene = document.getElementById('scene');
        let isDragging = false, startX, startY, rotY = -25, rotX = 15;

        document.addEventListener('mousedown', (e) => { isDragging = true; startX = e.pageX; startY = e.pageY; });
        document.addEventListener('mousemove', (e) => {
            if (!isDragging) return;
            rotY += (e.pageX - startX) * 0.4;
            rotX -= (e.pageY - startY) * 0.2;
            scene.style.transform = `rotateY(${rotY}deg) rotateX(${rotX}deg)`;
            startX = e.pageX; startY = e.pageY;
        });
        document.addEventListener('mouseup', () => isDragging = false);

        const db = [
            {n: "Australia", c: "Canberra"}, {n: "Brazil", c: "Brasília"}, {n: "Canada", c: "Ottawa"}, 
            {n: "India", c: "New Delhi"}, {n: "Japan", c: "Tokyo"}, {n: "USA", c: "Washington D.C."}
        ].sort((a, b) => a.n.localeCompare(b.n));

        const vp = document.getElementById('viewport');
        db.forEach((item, i) => {
            const div = document.createElement('div');
            div.className = `item ${i === 0 ? 'active' : ''}`;
            div.innerText = item.n; div.dataset.cap = item.c;
            vp.appendChild(div);
        });

        let idx = 0;
        function nav(step) {
            const items = document.querySelectorAll('.item');
            items[idx].classList.remove('active');
            idx = (idx + step + items.length) % items.length;
            items[idx].classList.add('active');
            items[idx].scrollIntoView({ block: "center", behavior: "smooth" });
        }

        function confirm() {
            const activeItem = document.querySelectorAll('.item')[idx];
            document.getElementById('cap-display').innerText = activeItem.dataset.cap;
            document.getElementById('popup').style.display = 'flex';
        }

        function closePop() { document.getElementById('popup').style.display = 'none'; }
    </script>
</body>
</html>